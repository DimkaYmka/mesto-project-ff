(()=>{"use strict";document.querySelectorAll(".popup"),document.querySelectorAll(".popup__form");var e=document.forms["new-place"],t=document.forms["place-avatar"],n=document.querySelector(".places__list"),o=document.querySelector("#card-template"),r=document.querySelector(".profile__add-button"),c=document.querySelector(".profile__edit-button"),a=document.querySelector(".profile__image"),i=document.querySelector(".popup__input_type_name"),u=document.querySelector(".popup__input_type_description"),s=document.querySelector(".profile__title"),l=document.querySelector(".profile__description"),d=document.querySelector(".popup_type_edit"),p=document.querySelector(".popup_type_new-card"),m=document.querySelector(".popup_type_avatar"),f=document.querySelector(".popup"),_=document.getElementById("place-name"),v=document.getElementById("link"),y=document.querySelector(".popup__image"),h=document.querySelector(".popup__caption"),S=document.querySelector(".popup_type_image"),g=(document.querySelector(".card__image"),function(e){return fetch("https://nomoreparties.co/v1/cohort-magistr-2/cards/".concat(e,"/likes"),{method:"PUT",headers:{authorization:"4968ccd2-3516-4ddc-a6b3-c5c111c52581","Content-Type":"application/json"}}).then((function(e){return e.json()}))}),q=function(e){return fetch("https://nomoreparties.co/v1/cohort-magistr-2/cards/".concat(e,"/likes"),{method:"DELETE",headers:{authorization:"4968ccd2-3516-4ddc-a6b3-c5c111c52581","Content-Type":"application/json"}}).then((function(e){return e.json()}))},E=function(e,t){(function(e){return fetch("https://nomoreparties.co/v1/cohort-magistr-2/cards/".concat(e),{method:"DELETE",headers:{authorization:"4968ccd2-3516-4ddc-a6b3-c5c111c52581","Content-Type":"application/json"}}).then((function(e){return e.json()}))})(t).then((function(t){console.log("Card deleted successfully:",t),e.remove()})).catch((function(e){console.error("Error deleting card:",e)}))},C=function(e,t){var n=t.classList.contains("card__like-button_is-active");(n?q:g)(e).then((function(e){console.log("Like action successful:",e),t.classList.toggle("card__like-button_is-active",!n),t.parentElement.querySelector(".card__like").textContent=e.likes.length})).catch((function(e){console.error("Error:",e)}))},b=function(e,t,r,c,a){var i=function(e,t,n,r,c,a,i){var u=o.content.querySelector(".card").cloneNode(!0);u.querySelector(".card__title").textContent=e;var s=u.querySelector(".card__image");s.src=t,s.alt=e,u.querySelector(".card__delete-button").addEventListener("click",(function(){a(u,n)})),u.querySelector(".card__like").textContent=r.length,s.addEventListener("click",(function(){c({name:e,link:t})}));var l=u.querySelector(".card__like-button");return l.addEventListener("click",(function(){i(n,l)})),u}(e,t,r,c,a,E,C);n.prepend(i)};function k(e){e.classList.add("popup_is-opened"),document.addEventListener("keydown",x),document.addEventListener("mousedown",T)}function L(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",x),document.removeEventListener("mousedown",T)}function x(e){"Escape"===e.key&&L(document.querySelector(".popup_is-opened"))}var j,T=function(e){(e.target.classList.contains("popup_is-opened")||e.target.classList.contains("popup__close"))&&L(document.querySelector(".popup_is-opened"))},z=function(e,t,n){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?t.classList.remove(n.inactiveButtonClass):t.classList.add(n.inactiveButtonClass)};function A(e){var t=e.textContent;return e.textContent="Сохранение...",t}function B(e,t){e.textContent=t}function w(e){k(S),console.log(e.link),y.src=e.link,y.alt=e.name,h.textContent=e.name}fetch("https://nomoreparties.co/v1/cohort-magistr-2/users/me",{headers:{authorization:"4968ccd2-3516-4ddc-a6b3-c5c111c52581"}}).then((function(e){return e.json()})).then((function(e){s.textContent=e.name,l.textContent=e.about;var t=Date.now(),n=e.avatar+"?"+t;document.querySelector(".profile__image").style.backgroundImage="url('".concat(n,"')")})),e.addEventListener("submit",(function(t){t.preventDefault();var o,r,c=e.querySelector(".popup__button"),a=A(c),i={name:_.value,link:v.value};(o=i.name,r=i.link,fetch("https://nomoreparties.co/v1/cohort-magistr-2/cards",{method:"POST",headers:{authorization:"4968ccd2-3516-4ddc-a6b3-c5c111c52581","Content-Type":"application/json"},body:JSON.stringify({name:o,link:r})}).then((function(e){return e.json()}))).then((function(t){console.log("Card created successfully:",t),n.prepend(b(i.name,i.link,[],w,E)),L(p),e.reset()})).catch((function(e){console.error("Error creating card:",e)})).finally((function(){B(c,a)}))})),c.addEventListener("click",(function(){i.value=s.textContent,u.value=l.textContent,k(d)})),a.addEventListener("click",(function(){k(m)})),f.addEventListener("submit",(function(e){e.preventDefault();var t,n,o=f.querySelector(".popup__button"),r=A(o),c=i.value,a=u.value;(t=c,n=a,fetch("https://nomoreparties.co/v1/cohort-magistr-2/users/me",{method:"PATCH",headers:{authorization:"4968ccd2-3516-4ddc-a6b3-c5c111c52581","Content-Type":"application/json"},body:JSON.stringify({name:t,about:n})}).then((function(e){return e.json()}))).then((function(){s.textContent=c,l.textContent=a,L(d)})).catch((function(e){console.error("Error updating profile:",e)})).finally((function(){B(o,r)}))})),t.addEventListener("submit",(function(e){e.preventDefault();var n=t.querySelector(".popup__button"),o=A(n),r=document.getElementById("place-avatar").value;(function(e){return fetch("https://nomoreparties.co/v1/cohort-magistr-2/users/me/avatar",{method:"PATCH",headers:{authorization:"4968ccd2-3516-4ddc-a6b3-c5c111c52581","Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then((function(e){return e.json()}))})(r).then((function(){document.querySelector(".profile__image").style.backgroundImage="url('".concat(r,"')"),L(m)})).catch((function(e){console.error("Error updating avatar:",e)})).finally((function(){B(n,o)}))})),r.addEventListener("click",(function(){k(p)})),fetch("https://nomoreparties.co/v1/cohort-magistr-2/cards",{headers:{authorization:"4968ccd2-3516-4ddc-a6b3-c5c111c52581"}}).then((function(e){return e.json()})).then((function(e){e.reverse().forEach((function(e){b(e.name,e.link,e._id,e.likes,w)}))})).catch((function(e){console.error("Error fetching initial cards:",e)})),j={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"button_inactive",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},Array.from(document.querySelectorAll(j.formSelector)).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),function(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector)),o=e.querySelector(t.submitButtonSelector);z(n,o,t),n.forEach((function(r){r.addEventListener("input",(function(){!function(e,t,n){t.validity.valid?function(e,t,n){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(n.inputErrorClass),o.classList.remove(n.errorClass),o.textContent=""}(e,t,n):function(e,t,n,o){var r=e.querySelector(".".concat(t.id,"-error"));t.classList.add(o.inputErrorClass),r.textContent=n,r.classList.add(o.errorClass)}(e,t,t.validationMessage,n)}(e,r,t),z(n,o,t)}))}))}(e,j)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBQzlDRSxFQUFrQkMsRUFBV0MsRUFBZUosRUFDOUMsR0FDRixHQUNGLENBUUkwRCxDQUFrQlIsRUFBYWxELEVBQ2pDLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWZmLy4vc3JjL2NvbnN0YW50cy9lbGVtZW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWZmLy4vc3JjL3NjcmlwdHMvYXBpLmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QtZmYvLi9zcmMvc2NyaXB0cy9jYXJkLmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QtZmYvLi9zcmMvc2NyaXB0cy9tb2RhbC5qcyIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWZmLy4vc3JjL3NjcmlwdHMvdmFsaWRhdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWZmLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHBvcHVwcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cCcpO1xuY29uc3QgZm9ybXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2Zvcm0nKTtcblxuY29uc3QgcG9wdXBBZGRDYXJkRm9ybSA9IGRvY3VtZW50LmZvcm1zWyduZXctcGxhY2UnXTtcbmNvbnN0IHBvcHVwQXZhdGFyID0gZG9jdW1lbnQuZm9ybXNbJ3BsYWNlLWF2YXRhciddO1xuXG5jb25zdCBjYXJkc0NvbnRlaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGFjZXNfX2xpc3QnKTtcbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjYXJkLXRlbXBsYXRlJyk7XG5cbmNvbnN0IG9wZW5DYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKVxuY29uc3Qgb3BlblByb2ZpbGVCdXR0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XG5jb25zdCBvcGVuQXZhdGFyQnV0dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19pbWFnZScpO1xuXG5jb25zdCBpbnB1dE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfbmFtZScpO1xuY29uc3QgaW5wdXRJbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX2Rlc2NyaXB0aW9uJyk7XG5cblxuY29uc3QgbmFtZUluZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fdGl0bGUnKTsvLyDQktC+0YHQv9C+0LvRjNC30YPQudGC0LXRgdGMINC40L3RgdGC0YDRg9C80LXQvdGC0L7QvCAucXVlcnlTZWxlY3RvcigpXG5jb25zdCBqb2JJbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2Rlc2NyaXB0aW9uJyk7XG5cbmNvbnN0IHBvcHVwUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX2VkaXQnKTtcbmNvbnN0IGNhcmRQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX25ldy1jYXJkJyk7XG5jb25zdCBhdmF0YXJQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX2F2YXRhcicpO1xuXG5jb25zdCBwcm9maWxlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cCcpO1xuXG5jb25zdCBwbGFjZU5hbWVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGxhY2UtbmFtZVwiKTtcbmNvbnN0IHBsYWNlVXJsSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxpbmtcIik7XG5cblxuXG5jb25zdCBiaWdJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcbmNvbnN0IGJpZ1RpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jYXB0aW9uJyk7XG5cbmNvbnN0IGJpZ1BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfaW1hZ2UnKTtcbmNvbnN0IHBvcHVwSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKTtcblxuXG5cbmV4cG9ydCB7XG4gIHBvcHVwcywgZm9ybXMsIGNhcmRzQ29udGVpbmVyLFxuICBjYXJkVGVtcGxhdGUsIG9wZW5DYXJkQnV0dG9uLCBvcGVuUHJvZmlsZUJ1dHR0b24sXG4gIGlucHV0TmFtZSwgaW5wdXRJbmZvLCBuYW1lSW5mbywgam9iSW5mbyxcbiAgcG9wdXBQcm9maWxlLCBwcm9maWxlRm9ybSwgcGxhY2VOYW1lSW5wdXQsIHBsYWNlVXJsSW5wdXQsIGNhcmRQb3B1cCxcbiBiaWdQb3B1cCwgYmlnSW1hZ2UsIGJpZ1RpdGxlLCBwb3B1cEltYWdlLCBwb3B1cEFkZENhcmRGb3JtLCBcbiBvcGVuQXZhdGFyQnV0dHRvbiwgYXZhdGFyUG9wdXAsIHBvcHVwQXZhdGFyXG59IiwiY29uc3QgY29uZmlnID0ge1xuICBiYXNlVXJsOiAnaHR0cHM6Ly9ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC1tYWdpc3RyLTInLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogJzQ5NjhjY2QyLTM1MTYtNGRkYy1hNmIzLWM1YzExMWM1MjU4MScsXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBnZXRVc2VyRGF0YSA9ICgpID0+IHtcbiAgcmV0dXJuIGZldGNoKCdodHRwczovL25vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LW1hZ2lzdHItMi91c2Vycy9tZScsIHtcbiAgICBoZWFkZXJzOiB7XG4gICAgICBhdXRob3JpemF0aW9uOiAnNDk2OGNjZDItMzUxNi00ZGRjLWE2YjMtYzVjMTExYzUyNTgxJ1xuICAgIH1cbiAgfSlcbiAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSk7XG59XG5cbmV4cG9ydCBjb25zdCBnZXRJbml0aWFsQ2FyZHMgPSAoKSA9PiB7XG4gIHJldHVybiBmZXRjaCgnaHR0cHM6Ly9ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC1tYWdpc3RyLTIvY2FyZHMnLCB7XG4gICAgaGVhZGVyczoge1xuICAgICAgYXV0aG9yaXphdGlvbjogJzQ5NjhjY2QyLTM1MTYtNGRkYy1hNmIzLWM1YzExMWM1MjU4MSdcbiAgICB9XG4gIH0pXG4gICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpO1xufVxuXG5cbmV4cG9ydCBjb25zdCB1cGRhdGVQcm9maWxlID0gKG5hbWUsIGFib3V0KSA9PiB7XG4gIHJldHVybiBmZXRjaCgnaHR0cHM6Ly9ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC1tYWdpc3RyLTIvdXNlcnMvbWUnLCB7XG4gICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgIGF1dGhvcml6YXRpb246ICc0OTY4Y2NkMi0zNTE2LTRkZGMtYTZiMy1jNWMxMTFjNTI1ODEnLFxuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgIH0sXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgbmFtZTogbmFtZSxcbiAgICAgIGFib3V0OiBhYm91dFxuICAgIH0pXG4gIH0pXG4gIC50aGVuKHJlcyA9PiByZXMuanNvbigpKTtcbn07XG5cbmV4cG9ydCBjb25zdCBwb3N0Q2FyZCA9IChuYW1lLCBsaW5rKSA9PiB7XG4gIHJldHVybiBmZXRjaCgnaHR0cHM6Ly9ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC1tYWdpc3RyLTIvY2FyZHMnLCB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgaGVhZGVyczoge1xuICAgICAgYXV0aG9yaXphdGlvbjogJzQ5NjhjY2QyLTM1MTYtNGRkYy1hNmIzLWM1YzExMWM1MjU4MScsXG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgfSxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICBuYW1lOiBuYW1lLFxuICAgICAgbGluazogbGlua1xuICAgIH0pXG4gIH0pXG4gIC50aGVuKHJlcyA9PiByZXMuanNvbigpKTtcbn07XG5cbmV4cG9ydCBjb25zdCBkZWxldGVDYXJkID0gKGNhcmRJZCkgPT4ge1xuICByZXR1cm4gZmV0Y2goYGh0dHBzOi8vbm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtbWFnaXN0ci0yL2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgIGF1dGhvcml6YXRpb246ICc0OTY4Y2NkMi0zNTE2LTRkZGMtYTZiMy1jNWMxMTFjNTI1ODEnLFxuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgIH1cbiAgfSlcbiAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpO1xufTtcblxuZXhwb3J0IGNvbnN0IGFkZExpa2UgPSAoY2FyZElkKSA9PiB7XG4gIHJldHVybiBmZXRjaChgaHR0cHM6Ly9ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC1tYWdpc3RyLTIvY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xuICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgaGVhZGVyczoge1xuICAgICAgYXV0aG9yaXphdGlvbjogJzQ5NjhjY2QyLTM1MTYtNGRkYy1hNmIzLWM1YzExMWM1MjU4MScsXG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgfVxuICB9KVxuICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSk7XG59O1xuXG5leHBvcnQgY29uc3QgZGVsZXRlTGlrZSA9IChjYXJkSWQpID0+IHtcbiAgcmV0dXJuIGZldGNoKGBodHRwczovL25vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LW1hZ2lzdHItMi9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICBoZWFkZXJzOiB7XG4gICAgICBhdXRob3JpemF0aW9uOiAnNDk2OGNjZDItMzUxNi00ZGRjLWE2YjMtYzVjMTExYzUyNTgxJyxcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICB9XG4gIH0pXG4gIC50aGVuKHJlcyA9PiByZXMuanNvbigpKTtcbn07XG5cbmV4cG9ydCBjb25zdCB1cGRhdGVBdmF0YXIgPSAoYXZhdGFyVXJsKSA9PiB7XG4gIHJldHVybiBmZXRjaCgnaHR0cHM6Ly9ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC1tYWdpc3RyLTIvdXNlcnMvbWUvYXZhdGFyJywge1xuICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICBoZWFkZXJzOiB7XG4gICAgICBhdXRob3JpemF0aW9uOiAnNDk2OGNjZDItMzUxNi00ZGRjLWE2YjMtYzVjMTExYzUyNTgxJyxcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICB9LFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIGF2YXRhciA6IGF2YXRhclVybFxuICAgIH0pXG4gIH0pXG4gIC50aGVuKHJlcyA9PiByZXMuanNvbigpKTtcbn07XG5cbiIsImltcG9ydCB7IGNhcmRzQ29udGVpbmVyLCBjYXJkVGVtcGxhdGUgfSBmcm9tICcuLi9jb25zdGFudHMvZWxlbWVudHMnO1xuaW1wb3J0IHsgaW5pdGlhbENhcmRzIH0gZnJvbSAnLi9jYXJkcyc7XG5pbXBvcnQgeyBkZWxldGVDYXJkLCBkZWxldGVMaWtlLCBhZGRMaWtlIH0gZnJvbSAnLi9hcGknO1xuXG5cbmNvbnN0IGNyZWF0ZU5ld0NhcmQgPSAobmFtZSwgbGluaywgY2FyZElkLCBsaWtlcywgb3BlbkltYWdlUG9wdXAsIGRlbGV0ZUZ1bmN0aW9uLCBsaWtlRnVuY3Rpb24pID0+IHtcbiAgY29uc3QgbmV3Q2FyZCA9IGNhcmRUZW1wbGF0ZS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkJykuY2xvbmVOb2RlKHRydWUpO1xuXG4gIG5ld0NhcmQucXVlcnlTZWxlY3RvcignLmNhcmRfX3RpdGxlJykudGV4dENvbnRlbnQgPSBuYW1lO1xuICBjb25zdCBlbGVtZW50c0ltYWdlID0gbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKTtcbiAgZWxlbWVudHNJbWFnZS5zcmMgPSBsaW5rO1xuICBlbGVtZW50c0ltYWdlLmFsdCA9IG5hbWU7XG5cbiAgLy/Rg9C00LDQu9C10L3QuGUg0LrQsNGA0YLQvtGH0LrQuCBcbiAgY29uc3QgZGVsZXRlQnV0dG9uID0gbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fZGVsZXRlLWJ1dHRvbicpO1xuICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgZGVsZXRlRnVuY3Rpb24obmV3Q2FyZCwgY2FyZElkKTtcbiAgfSk7XG5cbiAgLy8g0J7RgtC+0LHRgNCw0LbQtdC90LjQtSDQutC+0LvQuNGH0LXRgdGC0LLQsCDQu9Cw0LnQutC+0LJcbiAgY29uc3QgbGlrZXNDb3VudCA9IG5ld0NhcmQucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UnKTtcbiAgbGlrZXNDb3VudC50ZXh0Q29udGVudCA9IGxpa2VzLmxlbmd0aDtcblxuICAvLyDRgdC70YPRiNCw0YLQtdC70Ywg0L3QsCDQsdC+0LvRjNGI0L7QuSDQv9C+0L/QsNC/XG4gIGVsZW1lbnRzSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgb3BlbkltYWdlUG9wdXAoeyBuYW1lLCBsaW5rIH0pXG4gIH0pO1xuXG4gIGNvbnN0IGVsZW1lbnRzTGlrZSA9IG5ld0NhcmQucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UtYnV0dG9uJyk7XG4gIGVsZW1lbnRzTGlrZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBsaWtlRnVuY3Rpb24oY2FyZElkLCBlbGVtZW50c0xpa2UpO1xuICB9KTtcblxuICByZXR1cm4gbmV3Q2FyZDtcbn07XG5cbmNvbnN0IGRlbGV0ZUZ1bmN0aW9uID0gKGNhcmRUb0RlbGV0ZSwgY2FyZElkKSA9PiB7XG4gIGRlbGV0ZUNhcmQoY2FyZElkKVxuICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ0NhcmQgZGVsZXRlZCBzdWNjZXNzZnVsbHk6JywgZGF0YSk7XG4gICAgICBjYXJkVG9EZWxldGUucmVtb3ZlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgY2FyZDonLCBlcnJvcik7XG4gICAgfSk7XG59O1xuXG5cbmNvbnN0IGxpa2VGdW5jdGlvbiA9IChjYXJkSWQsIGVsZW1lbnRzTGlrZSkgPT4ge1xuICBjb25zdCBpc0xpa2VkID0gZWxlbWVudHNMaWtlLmNsYXNzTGlzdC5jb250YWlucygnY2FyZF9fbGlrZS1idXR0b25faXMtYWN0aXZlJyk7XG4gIGNvbnN0IGFwaU1ldGhvZCA9IGlzTGlrZWQgPyBkZWxldGVMaWtlIDogYWRkTGlrZTtcblxuICBhcGlNZXRob2QoY2FyZElkKVxuICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ0xpa2UgYWN0aW9uIHN1Y2Nlc3NmdWw6JywgZGF0YSk7XG4gICAgICAvLyDQntCx0L3QvtCy0LvRj9C10Lwg0YHQvtGB0YLQvtGP0L3QuNC1INC60L3QvtC/0LrQuCDQu9Cw0LnQutCwINC90LAg0LrQu9C40LXQvdGC0LVcbiAgICAgIGVsZW1lbnRzTGlrZS5jbGFzc0xpc3QudG9nZ2xlKCdjYXJkX19saWtlLWJ1dHRvbl9pcy1hY3RpdmUnLCAhaXNMaWtlZCk7XG5cbiAgICAgIC8vINCe0LHQvdC+0LLQu9GP0LXQvCDRgdGH0LXRgtGH0LjQuiDQu9Cw0LnQutC+0LIg0L3QsCDQutCw0YDRgtC+0YfQutC1XG4gICAgICBjb25zdCBsaWtlc0NvdW50RWxlbWVudCA9IGVsZW1lbnRzTGlrZS5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlJyk7XG4gICAgICBsaWtlc0NvdW50RWxlbWVudC50ZXh0Q29udGVudCA9IGRhdGEubGlrZXMubGVuZ3RoOyAvLyDQntCx0L3QvtCy0LvRj9C10Lwg0YHRh9C10YLRh9C40Log0L3QsCDQvtGB0L3QvtCy0LUg0LTQsNC90L3Ri9GFINGBINGB0LXRgNCy0LXRgNCwXG4gICAgfSlcbiAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3I6JywgZXJyb3IpO1xuICAgIH0pO1xufTtcblxuY29uc3QgcmVuZGVyQ2FyZCA9IChuYW1lLCBsaW5rLCBjYXJkSWQsIGxpa2VzLCBvcGVuSW1hZ2VQb3B1cCkgPT4ge1xuICBjb25zdCBuZXdDYXJkID0gY3JlYXRlTmV3Q2FyZChuYW1lLCBsaW5rLCBjYXJkSWQsIGxpa2VzLCBvcGVuSW1hZ2VQb3B1cCwgZGVsZXRlRnVuY3Rpb24sIGxpa2VGdW5jdGlvbik7XG5cbiAgY2FyZHNDb250ZWluZXIucHJlcGVuZChuZXdDYXJkKTtcbn07XG5cblxuXG5leHBvcnQgeyBpbml0aWFsQ2FyZHMsIGNyZWF0ZU5ld0NhcmQsIHJlbmRlckNhcmQsIGRlbGV0ZUZ1bmN0aW9uLCBsaWtlRnVuY3Rpb24gfVxuIiwiZnVuY3Rpb24gb3BlblBvcHVwKHBvcHVwRWxlbWVudCkge1xuICBwb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgncG9wdXBfaXMtb3BlbmVkJyk7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBjbG9zZVBvcHVwRXNjYXBlKTtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBjbG9zZVBvcHVwQnlPdmVybGF5KTsgXG59XG5cbi8v0LfQsNC60YDRi9GC0LjQtSDQv9C+0L/QsNC/0LBcbmZ1bmN0aW9uIGNsb3NlUG9wdXAocG9wdXBFbGVtZW50KSB7XG4gIHBvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9pcy1vcGVuZWQnKTtcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGNsb3NlUG9wdXBFc2NhcGUpO1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGNsb3NlUG9wdXBCeU92ZXJsYXkpO1xufTtcblxuLy/Qt9Cw0LrRgNGL0YLQuNC1INGE0L7RgNC80Ysg0L/QviBlc2NcbmZ1bmN0aW9uIGNsb3NlUG9wdXBFc2NhcGUoZXZ0KSB7XG4gIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgY29uc3QgcG9wdXBPcGVuZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfaXMtb3BlbmVkJyk7XG4gICAgY2xvc2VQb3B1cChwb3B1cE9wZW5lZCk7XG4gIH07XG59O1xuXG5jb25zdCBjbG9zZVBvcHVwQnlPdmVybGF5ID0gZXZ0ID0+IHtcbiAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9pcy1vcGVuZWQnKSB8fCBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlJykpIHtcbiAgICBjb25zdCBwb3B1cE9wZW5lZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9pcy1vcGVuZWQnKTtcbiAgICBjbG9zZVBvcHVwKHBvcHVwT3BlbmVkKTtcbiAgfVxufTtcblxuZXhwb3J0IHsgb3BlblBvcHVwLCBjbG9zZVBvcHVwLCBjbG9zZVBvcHVwRXNjYXBlIH07IiwiY29uc3Qgc2hvd0lucHV0RXJyb3IgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlLCBjb25maWcpID0+IHtcbiAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbiAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZChjb25maWcuZXJyb3JDbGFzcyk7XG59O1xuXG5jb25zdCBoaWRlSW5wdXRFcnJvciA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpID0+IHtcbiAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbiAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmVycm9yQ2xhc3MpO1xuICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcbn07XG5cbmNvbnN0IGhhc0ludmFsaWRJbnB1dCA9IChpbnB1dExpc3QpID0+IHtcbiAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgfSk7IFxufVxuXG5jb25zdCB0b2dnbGVCdXR0b25TdGF0ZSA9IChpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZykgPT4ge1xuICBpZihoYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xuICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gIH0gZWxzZSB7XG4gICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgfVxufVxuXG5jb25zdCBjaGVja0lucHV0VmFsaWRpdHkgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKSA9PiB7XG4gIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgc2hvd0lucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlLCBjb25maWcpO1xuICB9IGVsc2Uge1xuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZyk7XG4gIH1cbn07XG5cbmNvbnN0IHNldEV2ZW50TGlzdGVuZXJzID0gKGZvcm1FbGVtZW50LCBjb25maWcpID0+IHtcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XG4gIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpO1xuICAgICAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKSk7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gICAgZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybUVsZW1lbnQsIGNvbmZpZyk7XG4gIH0pO1xufTsiLCJpbXBvcnQgJy4uL3BhZ2VzL2luZGV4LmNzcyc7XG5pbXBvcnQgeyByZW5kZXJDYXJkLCBkZWxldGVGdW5jdGlvbiwgbGlrZUZ1bmN0aW9uIH0gZnJvbSAnLi4vc2NyaXB0cy9jYXJkLmpzJztcbmltcG9ydCB7IG9wZW5Qb3B1cCwgY2xvc2VQb3B1cCB9IGZyb20gJy4uL3NjcmlwdHMvbW9kYWwuanMnXG5pbXBvcnQge1xuICBvcGVuQ2FyZEJ1dHRvbiwgb3BlblByb2ZpbGVCdXR0dG9uLCBpbnB1dEluZm8sXG4gIGlucHV0TmFtZSwgbmFtZUluZm8sIGpvYkluZm8sIHBvcHVwUHJvZmlsZSwgY2FyZFBvcHVwLFxuICBwcm9maWxlRm9ybSwgYmlnUG9wdXAsIGJpZ0ltYWdlLCBiaWdUaXRsZSwgcGxhY2VOYW1lSW5wdXQsIHBsYWNlVXJsSW5wdXQsXG4gIHBvcHVwQWRkQ2FyZEZvcm0sIGNhcmRzQ29udGVpbmVyLCBwb3B1cEF2YXRhcixcbiAgZm9ybXMsIG9wZW5BdmF0YXJCdXR0dG9uLCBhdmF0YXJQb3B1cFxufSBmcm9tIFwiLi4vY29uc3RhbnRzL2VsZW1lbnRzLmpzXCI7XG5pbXBvcnQgeyBnZXRVc2VyRGF0YSwgZ2V0SW5pdGlhbENhcmRzLCB1cGRhdGVQcm9maWxlLCBwb3N0Q2FyZCwgdXBkYXRlQXZhdGFyIH0gZnJvbSAnLi4vc2NyaXB0cy9hcGkuanMnO1xuaW1wb3J0IHsgZW5hYmxlVmFsaWRhdGlvbiB9IGZyb20gJy4uL3NjcmlwdHMvdmFsaWRhdGlvbi5qcyc7XG5cblxuZ2V0VXNlckRhdGEoKS50aGVuKHVzZXJEYXRhID0+IHtcbiAgbmFtZUluZm8udGV4dENvbnRlbnQgPSB1c2VyRGF0YS5uYW1lO1xuICBqb2JJbmZvLnRleHRDb250ZW50ID0gdXNlckRhdGEuYWJvdXQ7XG5cbiAgLy8g0JPQtdC90LXRgNC40YDRg9C10Lwg0YHQu9GD0YfQsNC50L3Ri9C5INC/0LDRgNCw0LzQtdGC0YAg0LLRgNC10LzQtdC90Lgg0LTQu9GPIFVSTCDQsNCy0LDRgtCw0YDQsCDRh9GC0L7QsdGLINGB0LHRgNC+0YHQuNGC0Ywg0LrQsNGA0YLQuNC90LrRgyDQuNC3INC60Y3RiNCwXG4gIGNvbnN0IHRpbWVzdGFtcCA9IERhdGUubm93KCk7XG4gIGNvbnN0IHVwZGF0ZWRBdmF0YXJVcmwgPSB1c2VyRGF0YS5hdmF0YXIgKyAnPycgKyB0aW1lc3RhbXA7XG5cbiAgLy8g0J7QsdC90L7QstC70Y/QtdC8IFVSTCDQsNCy0LDRgtCw0YDQsCDQvdCwINGB0YLRgNCw0L3QuNGG0LVcbiAgY29uc3QgcHJvZmlsZUltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2ltYWdlJyk7XG4gIHByb2ZpbGVJbWFnZS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCcke3VwZGF0ZWRBdmF0YXJVcmx9JylgO1xufSk7XG5cbi8v0YHQu9GD0YjQsNGC0LXQu9GMINC60LvQuNC60LAg0L/QviDQutC90L7Qv9C60LUg0YHQvtGF0YDQsNC90LXQvdC40Y8g0YTQvtGA0LzRiyDQtNC+0LHQsNCy0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4XG5wb3B1cEFkZENhcmRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGhhbmRsZUNhcmRGb3JtU3VibWl0KTtcblxuLy/QodC70YPRiNCw0YLQtdC70Ywg0L3QsCDQvtGC0LrRgNGL0YLQuNC1INC00LvRjyDQv9GA0L7RhNC40LvRj1xub3BlblByb2ZpbGVCdXR0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBpbnB1dE5hbWUudmFsdWUgPSBuYW1lSW5mby50ZXh0Q29udGVudDtcbiAgaW5wdXRJbmZvLnZhbHVlID0gam9iSW5mby50ZXh0Q29udGVudDtcbiAgb3BlblBvcHVwKHBvcHVwUHJvZmlsZSlcbn0pO1xuXG4vL9Ch0LvRg9GI0LDRgtC10LvRjCDQvdCwINC+0YLQutGA0YvRgtC40LUg0LTQu9GPINC/0YDQvtGE0LjQu9GPXG5vcGVuQXZhdGFyQnV0dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgb3BlblBvcHVwKGF2YXRhclBvcHVwKVxufSk7XG5cbi8v0KHQu9GD0YjQsNGC0LXQu9GMINC90LAg0YHQsNCx0LzQuNGCINC00LvRjyDQv9GA0L7RhNC40LvRj1xucHJvZmlsZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQpO1xuXG4vL9Ch0LvRg9GI0LDRgtC10LvRjCDQvdCwINGB0LDQsdC80LjRgiDQtNC70Y8gYXZhdGFyXG5wb3B1cEF2YXRhci5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBoYW5kbGVBdmF0YXJGb3JtU3VibWl0KTtcblxuXG4vL9Ch0LvRg9GI0LDRgtC10LvRjCDQvdCwINC+0YLQutGA0YvRgtC40LUg0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LXQulxub3BlbkNhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIG9wZW5Qb3B1cChjYXJkUG9wdXApXG59KTtcblxuZnVuY3Rpb24gc2hvd0xvYWRlcihidXR0b24pIHtcbiAgY29uc3QgYnV0dG9uVGV4dCA9IGJ1dHRvbi50ZXh0Q29udGVudDsgLy8g0KHQvtGF0YDQsNC90Y/QtdC8INGC0LXQutGD0YnQuNC5INGC0LXQutGB0YIg0LrQvdC+0L/QutC4XG4gIGJ1dHRvbi50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLic7IC8vINCc0LXQvdGP0LXQvCDRgtC10LrRgdGCINC60L3QvtC/0LrQuCDQvdCwIFwi0KHQvtGF0YDQsNC90LXQvdC40LUuLi5cIlxuICByZXR1cm4gYnV0dG9uVGV4dDsgLy8g0JLQvtC30LLRgNCw0YnQsNC10Lwg0YHQvtGF0YDQsNC90LXQvdC90YvQuSDRgtC10LrRgdGCINC60L3QvtC/0LrQuFxufVxuXG5mdW5jdGlvbiBoaWRlTG9hZGVyKGJ1dHRvbiwgdGV4dCkge1xuICBidXR0b24udGV4dENvbnRlbnQgPSB0ZXh0OyAvLyDQktC+0LfQstGA0LDRidCw0LXQvCDRgtC10LrRgdGCINC60L3QvtC/0LrQuCDQuiDQuNC30L3QsNGH0LDQu9GM0L3QvtC80YMg0YHQvtGB0YLQvtGP0L3QuNGOXG59XG5cbmZ1bmN0aW9uIGhhbmRsZUNhcmRGb3JtU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTsgLy8g0J7RgtC80LXQvdGP0LXQvCDRgdGC0LDQvdC00LDRgNGC0L3QvtC1INC/0L7QstC10LTQtdC90LjQtSDRhNC+0YDQvNGLXG4gIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IHBvcHVwQWRkQ2FyZEZvcm0ucXVlcnlTZWxlY3RvcignLnBvcHVwX19idXR0b24nKTsgLy8g0J/QvtC70YPRh9Cw0LXQvCDQutC90L7Qv9C60YMg0YHQvtGF0YDQsNC90LXQvdC40Y9cbiAgY29uc3QgYnV0dG9uVGV4dCA9IHNob3dMb2FkZXIoc3VibWl0QnV0dG9uKTsgLy8g0J/QvtC60LDQt9GL0LLQsNC10Lwg0L/RgNC10LvQvtCw0LTQtdGAXG5cbiAgLy8g0J7QsdGA0LDQsdC+0YLQutCwINC+0YLQv9GA0LDQstC60Lgg0YTQvtGA0LzRi1xuICBjb25zdCBjYXJkID0ge1xuICAgIG5hbWU6IHBsYWNlTmFtZUlucHV0LnZhbHVlLFxuICAgIGxpbms6IHBsYWNlVXJsSW5wdXQudmFsdWVcbiAgfTtcbiAgXG4gIHBvc3RDYXJkKGNhcmQubmFtZSwgY2FyZC5saW5rKVxuICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ0NhcmQgY3JlYXRlZCBzdWNjZXNzZnVsbHk6JywgZGF0YSk7XG4gICAgICAvLyDQlNC+0LHQsNCy0LvRj9C10Lwg0YHQvtC30LTQsNC90L3Rg9GOINC60LDRgNGC0L7Rh9C60YNcbiAgICAgIGNhcmRzQ29udGVpbmVyLnByZXBlbmQocmVuZGVyQ2FyZChjYXJkLm5hbWUsIGNhcmQubGluaywgW10sIG9wZW5JbWFnZVBvcHVwLCBkZWxldGVGdW5jdGlvbiwgbGlrZUZ1bmN0aW9uKSk7XG4gICAgICBjbG9zZVBvcHVwKGNhcmRQb3B1cCk7XG4gICAgICBwb3B1cEFkZENhcmRGb3JtLnJlc2V0KCk7XG4gICAgfSlcbiAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgY2FyZDonLCBlcnJvcik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAvLyDQn9GA0Y/Rh9C10Lwg0L/RgNC10LvQvtCw0LTQtdGAXG4gICAgICBoaWRlTG9hZGVyKHN1Ym1pdEJ1dHRvbiwgYnV0dG9uVGV4dCk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTsgLy8g0J7RgtC80LXQvdGP0LXQvCDRgdGC0LDQvdC00LDRgNGC0L3QvtC1INC/0L7QstC10LTQtdC90LjQtSDRhNC+0YDQvNGLXG4gIFxuICBjb25zdCBzdWJtaXRCdXR0b24gPSBwcm9maWxlRm9ybS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J1dHRvbicpOyAvLyDQn9C+0LvRg9GH0LDQtdC8INC60L3QvtC/0LrRgyDRgdC+0YXRgNCw0L3QtdC90LjRj1xuICBjb25zdCBidXR0b25UZXh0ID0gc2hvd0xvYWRlcihzdWJtaXRCdXR0b24pOyAvLyDQn9C+0LrQsNC30YvQstCw0LXQvCDQv9GA0LXQu9C+0LDQtNC10YBcbiAgXG4gIGNvbnN0IG5ld05hbWUgPSBpbnB1dE5hbWUudmFsdWU7XG4gIGNvbnN0IG5ld0Fib3V0ID0gaW5wdXRJbmZvLnZhbHVlO1xuICBcbiAgLy8g0J7QsdC90L7QstC70LXQvdC40LUg0L/RgNC+0YTQuNC70Y9cbiAgdXBkYXRlUHJvZmlsZShuZXdOYW1lLCBuZXdBYm91dClcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICAvLyDQntCx0L3QvtCy0LvRj9C10Lwg0LjQvdGE0L7RgNC80LDRhtC40Y4g0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1INC90LAg0YHRgtGA0LDQvdC40YbQtVxuICAgICAgbmFtZUluZm8udGV4dENvbnRlbnQgPSBuZXdOYW1lO1xuICAgICAgam9iSW5mby50ZXh0Q29udGVudCA9IG5ld0Fib3V0O1xuICAgICAgY2xvc2VQb3B1cChwb3B1cFByb2ZpbGUpO1xuICAgIH0pXG4gICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHByb2ZpbGU6JywgZXJyb3IpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgLy8g0J/RgNGP0YfQtdC8INC/0YDQtdC70L7QsNC00LXRgFxuICAgICAgaGlkZUxvYWRlcihzdWJtaXRCdXR0b24sIGJ1dHRvblRleHQpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVBdmF0YXJGb3JtU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTsgLy8g0J7RgtC80LXQvdGP0LXQvCDRgdGC0LDQvdC00LDRgNGC0L3QvtC1INC/0L7QstC10LTQtdC90LjQtSDRhNC+0YDQvNGLXG4gIFxuICBjb25zdCBzdWJtaXRCdXR0b24gPSBwb3B1cEF2YXRhci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J1dHRvbicpOyAvLyDQn9C+0LvRg9GH0LDQtdC8INC60L3QvtC/0LrRgyDRgdC+0YXRgNCw0L3QtdC90LjRj1xuICBjb25zdCBidXR0b25UZXh0ID0gc2hvd0xvYWRlcihzdWJtaXRCdXR0b24pOyAvLyDQn9C+0LrQsNC30YvQstCw0LXQvCDQv9GA0LXQu9C+0LDQtNC10YBcbiAgXG4gIGNvbnN0IGF2YXRhclVybCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwbGFjZS1hdmF0YXInKS52YWx1ZTtcbiAgXG4gIC8vINCe0LHQvdC+0LLQu9C10L3QuNC1INCw0LLQsNGC0LDRgNCwXG4gIHVwZGF0ZUF2YXRhcihhdmF0YXJVcmwpXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgLy8g0JXRgdC70Lgg0LfQsNC/0YDQvtGBINGD0YHQv9C10YjQtdC9LCDQvtCx0L3QvtCy0LvRj9C10Lwg0LDQstCw0YLQsNGAINC90LAg0YHRgtGA0LDQvdC40YbQtVxuICAgICAgY29uc3QgcHJvZmlsZUltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2ltYWdlJyk7XG4gICAgICBwcm9maWxlSW1hZ2Uuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgnJHthdmF0YXJVcmx9JylgO1xuICAgICAgY2xvc2VQb3B1cChhdmF0YXJQb3B1cCk7XG4gICAgfSlcbiAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgYXZhdGFyOicsIGVycm9yKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIC8vINCf0YDRj9GH0LXQvCDQv9GA0LXQu9C+0LDQtNC10YBcbiAgICAgIGhpZGVMb2FkZXIoc3VibWl0QnV0dG9uLCBidXR0b25UZXh0KTtcbiAgICB9KTtcbn1cblxuLy/QvtGC0LrRgNGL0YLQuNC1INCx0L7Qu9GM0YjQvtC5INC60LDRgNGC0LjQvdC60LhcbmZ1bmN0aW9uIG9wZW5JbWFnZVBvcHVwKGRhdGFDYXJkKSB7XG4gIG9wZW5Qb3B1cChiaWdQb3B1cClcbiAgY29uc29sZS5sb2coZGF0YUNhcmQubGluayk7XG4gIGJpZ0ltYWdlLnNyYyA9IGRhdGFDYXJkLmxpbms7XG4gIGJpZ0ltYWdlLmFsdCA9IGRhdGFDYXJkLm5hbWU7XG4gIGJpZ1RpdGxlLnRleHRDb250ZW50ID0gZGF0YUNhcmQubmFtZTtcbn07XG5cbi8vINCy0YHRgtCw0LLQu9GP0LXQvCDQutCw0YDRgtC+0YfQutC4INC40Lcg0LzQsNGB0YHQuNCy0LBcbmdldEluaXRpYWxDYXJkcygpLnRoZW4oY2FyZHMgPT4ge1xuICBjYXJkcy5yZXZlcnNlKCkuZm9yRWFjaChjYXJkID0+IHtcbiAgICByZW5kZXJDYXJkKGNhcmQubmFtZSwgY2FyZC5saW5rLCBjYXJkLl9pZCwgY2FyZC5saWtlcywgb3BlbkltYWdlUG9wdXAsIGRlbGV0ZUZ1bmN0aW9uKTtcbiAgfSk7XG59KS5jYXRjaChlcnJvciA9PiB7XG4gIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGluaXRpYWwgY2FyZHM6JywgZXJyb3IpO1xufSk7XG5cblxuLy8g0JLRi9C30L7QstC10Lwg0YTRg9C90LrRhtC40Y5cbmVuYWJsZVZhbGlkYXRpb24oe1xuICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxuICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19pbnB1dCcsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19idXR0b24nLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAnYnV0dG9uX2luYWN0aXZlJyxcbiAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2lucHV0X3R5cGVfZXJyb3InLFxuICBlcnJvckNsYXNzOiAncG9wdXBfX2Vycm9yX3Zpc2libGUnXG59KTsgXG5cbiJdLCJuYW1lcyI6WyJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwb3B1cEFkZENhcmRGb3JtIiwiZm9ybXMiLCJwb3B1cEF2YXRhciIsImNhcmRzQ29udGVpbmVyIiwicXVlcnlTZWxlY3RvciIsImNhcmRUZW1wbGF0ZSIsIm9wZW5DYXJkQnV0dG9uIiwib3BlblByb2ZpbGVCdXR0dG9uIiwib3BlbkF2YXRhckJ1dHR0b24iLCJpbnB1dE5hbWUiLCJpbnB1dEluZm8iLCJuYW1lSW5mbyIsImpvYkluZm8iLCJwb3B1cFByb2ZpbGUiLCJjYXJkUG9wdXAiLCJhdmF0YXJQb3B1cCIsInByb2ZpbGVGb3JtIiwicGxhY2VOYW1lSW5wdXQiLCJnZXRFbGVtZW50QnlJZCIsInBsYWNlVXJsSW5wdXQiLCJiaWdJbWFnZSIsImJpZ1RpdGxlIiwiYmlnUG9wdXAiLCJhZGRMaWtlIiwiY2FyZElkIiwiZmV0Y2giLCJjb25jYXQiLCJtZXRob2QiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInRoZW4iLCJyZXMiLCJqc29uIiwiZGVsZXRlTGlrZSIsImRlbGV0ZUZ1bmN0aW9uIiwiY2FyZFRvRGVsZXRlIiwiZGVsZXRlQ2FyZCIsImRhdGEiLCJjb25zb2xlIiwibG9nIiwicmVtb3ZlIiwiY2F0Y2giLCJlcnJvciIsImxpa2VGdW5jdGlvbiIsImVsZW1lbnRzTGlrZSIsImlzTGlrZWQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInRvZ2dsZSIsInBhcmVudEVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsImxpa2VzIiwibGVuZ3RoIiwicmVuZGVyQ2FyZCIsIm5hbWUiLCJsaW5rIiwib3BlbkltYWdlUG9wdXAiLCJuZXdDYXJkIiwiY29udGVudCIsImNsb25lTm9kZSIsImVsZW1lbnRzSW1hZ2UiLCJzcmMiLCJhbHQiLCJhZGRFdmVudExpc3RlbmVyIiwiY3JlYXRlTmV3Q2FyZCIsInByZXBlbmQiLCJvcGVuUG9wdXAiLCJwb3B1cEVsZW1lbnQiLCJhZGQiLCJjbG9zZVBvcHVwRXNjYXBlIiwiY2xvc2VQb3B1cEJ5T3ZlcmxheSIsImNsb3NlUG9wdXAiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwia2V5IiwiY29uZmlnIiwidGFyZ2V0IiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJpbnB1dExpc3QiLCJidXR0b25FbGVtZW50Iiwic29tZSIsImlucHV0RWxlbWVudCIsInZhbGlkaXR5IiwidmFsaWQiLCJoYXNJbnZhbGlkSW5wdXQiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwic2hvd0xvYWRlciIsImJ1dHRvbiIsImJ1dHRvblRleHQiLCJoaWRlTG9hZGVyIiwidGV4dCIsImRhdGFDYXJkIiwidXNlckRhdGEiLCJhYm91dCIsInRpbWVzdGFtcCIsIkRhdGUiLCJub3ciLCJ1cGRhdGVkQXZhdGFyVXJsIiwiYXZhdGFyIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJwcmV2ZW50RGVmYXVsdCIsInN1Ym1pdEJ1dHRvbiIsImNhcmQiLCJ2YWx1ZSIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwicmVzZXQiLCJmaW5hbGx5IiwibmV3TmFtZSIsIm5ld0Fib3V0IiwiYXZhdGFyVXJsIiwidXBkYXRlQXZhdGFyIiwiY2FyZHMiLCJyZXZlcnNlIiwiZm9yRWFjaCIsIl9pZCIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJBcnJheSIsImZyb20iLCJmb3JtRWxlbWVudCIsImVycm9yRWxlbWVudCIsImlkIiwiaGlkZUlucHV0RXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJzaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiY2hlY2tJbnB1dFZhbGlkaXR5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiXSwic291cmNlUm9vdCI6IiJ9